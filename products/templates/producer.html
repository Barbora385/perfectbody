{% extends "base.html" %}

{% block content %}

<h1>{{ producer.producer_name }}</h1>

<!-- Zobrazen√≠ loga v√Ωrobce -->
{% if producer.producer_view %}
    <div class="producer-logo">
        <img src="{{ producer.producer_view }}" alt="Logo {{ producer.producer_name }}" style="max-width: 250px; height: auto;">
    </div>
{% endif %}

<p>{{ producer.producer_description }}</p>

<!-- Admin actions -->
{% if user.is_staff %}
    <div class="admin-actions">
        <a href="{% url 'edit_producer' producer.pk %}" class="btn btn-sm btn-warning">üñâ Upravit v√Ωrobce</a>
        <form method="post" action="{% url 'delete_producer' producer.pk %}" class="delete-button">
            {% csrf_token %}
            <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('Opravdu chcete smazat tohoto v√Ωrobce?');">üóëÔ∏è Smazat v√Ωrobce</button>
        </form>
    </div>
{% endif %}

<h2>Produkty v√Ωrobce</h2>
{% if grouped_products %}
    {% for category, products in grouped_products.items %}
        <h3>
            <a href="{% url 'products' category.pk %}">
                {{ category.category_name }}
            </a>
        </h3>
        <ul>
            {% for product in products %}
                <li>
                    <a href="{% url 'product' product.id %}">{{ product.product_name }}</a> - {{ product.price }} Kƒç
                </li>
            {% endfor %}
        </ul>
    {% endfor %}
{% else %}
    <p style="color: red;">≈Ω√°dn√© produkty nejsou k dispozici.</p>
{% endif %}

<!-- Seznam v≈°ech v√Ωrobc≈Ø -->
<p>
    <b>V√Ωrobci:</b>
    {% for producer_item in all_producers %}
        <a href="{% url 'producer' producer_item.pk %}">{{ producer_item.producer_name }}</a>{% if not forloop.last %}, {% endif %}
    {% endfor %}
</p>

{% endblock %}
